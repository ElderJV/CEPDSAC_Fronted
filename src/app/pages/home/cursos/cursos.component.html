<section class="cursos container-fluid">
  <h1 class="fw-bold text-uppercase">Nuestros</h1>
  <h2 class="fw-bold text-uppercase text-custom-orange">
    <strong>CURSOS</strong>
  </h2>

  @if (isLoading) {
    <div class="text-center mt-4">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
    </div>
  }

  @if (errorMessage) {
    <div class="alert alert-warning mt-4" role="alert">
      {{ errorMessage }}
    </div>
  }

  @if (!isLoading && !errorMessage && categorias.length > 0) {
    <ul class="nav nav-pills mb-4" id="cursos-tab" role="tablist">
      @for (categoria of categorias; track categoria.id; let i = $index) {
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            [class.active]="i === 0"
            [id]="categoria.id + '-tab'"
            data-bs-toggle="pill"
            [attr.data-bs-target]="'#cat-' + categoria.id"
            type="button"
            role="tab"
            [attr.aria-controls]="'cat-' + categoria.id"
            [attr.aria-selected]="i === 0"
          >
            {{ categoria.nombre }}
          </button>
        </li>
      }
    </ul>

    <div class="tab-content" id="cursos-tabContent">
      @for (categoria of categorias; track categoria.id; let i = $index) {
        <div
          class="tab-pane fade"
          [class.show]="i === 0"
          [class.active]="i === 0"
          [id]="'cat-' + categoria.id"
          role="tabpanel"
          [attr.aria-labelledby]="categoria.id + '-tab'"
        >
          <div class="row g-4">
            @for (curso of getCursosPorCategoria(categoria.nombre); track curso.idCursoDiplomado) {
              <div class="col-custom">
                <div
                  class="card-curso"
                  [style.backgroundImage]="'url(' + (curso.urlCurso || 'https://placehold.co/600x400/64748B/FFFFFF?text=Curso') + ')'"
                >
                  <div class="card-curso-content">
                    <h5 class="card-title">{{ curso.titulo }}</h5>
                    <a [routerLink]="['/curso', curso.idCursoDiplomado]" class="card-link">Ver curso</a>
                  </div>
                </div>
              </div>
            }
          </div>
        </div>
      }
    </div>
  }

  @if (!isLoading && !errorMessage && categorias.length === 0) {
    <p class="text-muted mt-4">No hay cursos disponibles en este momento.</p>
  }
</section>
